<!DOCTYPE html>
{% extends 'base.html' %}
<html lang="en">
<head>
    {% block head %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <title>{% block title %} Daftar User {% endblock %}</title>
 
    {% endblock %}
</head>
<body>
    {% block body %}   
    <script>users_active()</script>
    <h1>Daftar Pengguna</h1>
    <br>
    <link href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css" rel="stylesheet">
    <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/extensions/auto-refresh/bootstrap-table-auto-refresh.min.js"></script>

<div class="card">
    <div class="card-body">
      <div id="toolbar">
        <a class="btn btn-danger" href="{{ url_for('add_user')}}">
          <i class="fs-5 bi-plus"></i>Tambah User
        </a>
      </div >
        <table class="table-striped table-responsive-sm small"
        data-toggle="table"
        data-search="true"
        data-show-columns="true"
        data-pagination="true"
        data-toolbar="#toolbar">
        <thead>
          <tr class="tr-class-1">
            <th scope="col" data-field="no" >No</th>
            <th scope="col" data-field="UserId" >User ID</th>
            <th scope="col" data-field="Nama" >Nama</th>
            <th scope="col" data-field="email" >Email</th>
            <th scope="col" data-field="nim" >NIM</th>
            <th scope="col" data-field="tipePengguna" >Tipe Pengguna</th>
            <th scope="col" data-field="aksi" >Aksi</th>
          </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr id="tr-id-1" class="tr-class-1">
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ user.user_id }}</td>
                    <td>{{ user.nama }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.nim }}</td>
                    <td>{{ user.role }}</td>
                    <td>
                        <a class="btn btn-primary btn-sm"  href="{{ url_for('edit_user',user_id=user.user_id)}}">
                            <i class="fs-6 bi-pencil"></i>
                        </a>
                        <a class="btn btn-danger btn-sm" id="delete" href="{{ url_for('delete_user',user_id=user.user_id)}}">
                            <i class="fs-6 bi-trash"></i>
                        </a>
                    </td>    
                </tr>
            {% endfor%}
        </tbody>
      </table>
    </div>
</div>
<script>
  function myFunction() {
    let text = "Press a button!\nEither OK or Cancel.";
    if (confirm(text) == true) {
      text = "You pressed OK!";
    } else {
      text = "You canceled!";
    }
    document.getElementById("demo").innerHTML = text;
  }
  </script>
    {% endblock %}
</body>
{% block script %}
{% endblock %}
</html>